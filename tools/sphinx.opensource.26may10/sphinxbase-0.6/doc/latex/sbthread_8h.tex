\section{include/sbthread.h File Reference}
\label{sbthread_8h}\index{include/sbthread.h@{include/sbthread.h}}
Simple portable thread functions.  


{\tt \#include $<$sphinx\_\-config.h$>$}\par
{\tt \#include $<$sphinxbase\_\-export.h$>$}\par
{\tt \#include $<$cmd\_\-ln.h$>$}\par
\subsection*{Typedefs}
\begin{CompactItemize}
\item 
typedef struct sbthread\_\-s {\bf sbthread\_\-t}\label{sbthread_8h_068f6028c760eee1e4eb4655ac7e7424}

\begin{CompactList}\small\item\em Thread object. \item\end{CompactList}\item 
typedef struct sbmsgq\_\-s {\bf sbmsgq\_\-t}\label{sbthread_8h_ad7adcc2e5f2fd6d2f429c25a52356ef}

\begin{CompactList}\small\item\em Asynchronous message queue object. \item\end{CompactList}\item 
typedef struct sbmtx\_\-s {\bf sbmtx\_\-t}\label{sbthread_8h_21bc1100c4336693a6f25cdeec40cbec}

\begin{CompactList}\small\item\em Mutex (critical section) object. \item\end{CompactList}\item 
typedef struct sbevent\_\-s {\bf sbevent\_\-t}\label{sbthread_8h_312dae368aa1662b07f199ea802cdefa}

\begin{CompactList}\small\item\em Event object. \item\end{CompactList}\item 
typedef int($\ast$ {\bf sbthread\_\-main} )({\bf sbthread\_\-t} $\ast$th)\label{sbthread_8h_cb30b2ddcf70058f8bd38d68920be777}

\begin{CompactList}\small\item\em Entry point for a thread. \item\end{CompactList}\end{CompactItemize}
\subsection*{Functions}
\begin{CompactItemize}
\item 
SPHINXBASE\_\-EXPORT {\bf sbthread\_\-t} $\ast$ {\bf sbthread\_\-start} ({\bf cmd\_\-ln\_\-t} $\ast$config, {\bf sbthread\_\-main} func, void $\ast$arg)\label{sbthread_8h_bfe1f703f4e17a2940c88d86d1987a8f}

\begin{CompactList}\small\item\em Start a new thread. \item\end{CompactList}\item 
SPHINXBASE\_\-EXPORT int {\bf sbthread\_\-wait} ({\bf sbthread\_\-t} $\ast$th)\label{sbthread_8h_09c5c428b02b743c99d20bb2b11d964b}

\begin{CompactList}\small\item\em Wait for a thread to complete. \item\end{CompactList}\item 
SPHINXBASE\_\-EXPORT void {\bf sbthread\_\-free} ({\bf sbthread\_\-t} $\ast$th)\label{sbthread_8h_a7827b760dfa47d95141f4896698e5c5}

\begin{CompactList}\small\item\em Free a thread object. \item\end{CompactList}\item 
SPHINXBASE\_\-EXPORT {\bf cmd\_\-ln\_\-t} $\ast$ {\bf sbthread\_\-config} ({\bf sbthread\_\-t} $\ast$th)\label{sbthread_8h_b03c2f299f3e94b9f53aac1c1eaa0695}

\begin{CompactList}\small\item\em Get configuration object from a thread. \item\end{CompactList}\item 
SPHINXBASE\_\-EXPORT void $\ast$ {\bf sbthread\_\-arg} ({\bf sbthread\_\-t} $\ast$th)\label{sbthread_8h_130f2273128498e0f1d875cf6c0c2928}

\begin{CompactList}\small\item\em Get argument pointer from a thread. \item\end{CompactList}\item 
SPHINXBASE\_\-EXPORT {\bf sbmsgq\_\-t} $\ast$ {\bf sbthread\_\-msgq} ({\bf sbthread\_\-t} $\ast$th)\label{sbthread_8h_5dfe1b7bb9c8d9aea7339e99a89307af}

\begin{CompactList}\small\item\em Get message queue from a thread. \item\end{CompactList}\item 
SPHINXBASE\_\-EXPORT int {\bf sbthread\_\-send} ({\bf sbthread\_\-t} $\ast$th, size\_\-t len, void const $\ast$data)
\begin{CompactList}\small\item\em Send an asynchronous message to a thread. \item\end{CompactList}\item 
SPHINXBASE\_\-EXPORT {\bf sbmsgq\_\-t} $\ast$ {\bf sbmsgq\_\-init} (size\_\-t depth)
\begin{CompactList}\small\item\em Create a message queue. \item\end{CompactList}\item 
SPHINXBASE\_\-EXPORT void {\bf sbmsgq\_\-free} ({\bf sbmsgq\_\-t} $\ast$q)\label{sbthread_8h_b1ab59934422a5fac90ce0c4b66ffcc8}

\begin{CompactList}\small\item\em Free a message queue. \item\end{CompactList}\item 
SPHINXBASE\_\-EXPORT int {\bf sbmsgq\_\-send} ({\bf sbmsgq\_\-t} $\ast$q, size\_\-t len, void const $\ast$data)\label{sbthread_8h_b0591b5cb626be52dd22edf8fa13a3e3}

\begin{CompactList}\small\item\em Post a message to a queue. \item\end{CompactList}\item 
SPHINXBASE\_\-EXPORT void $\ast$ {\bf sbmsgq\_\-wait} ({\bf sbmsgq\_\-t} $\ast$q, size\_\-t $\ast$out\_\-len, int sec, int nsec)\label{sbthread_8h_b3a421d172a92ef5ad371442a66767b5}

\begin{CompactList}\small\item\em Wait for a message from a queue. \item\end{CompactList}\item 
SPHINXBASE\_\-EXPORT {\bf sbmtx\_\-t} $\ast$ {\bf sbmtx\_\-init} (void)\label{sbthread_8h_28067c5be5370074d21668620a68b229}

\begin{CompactList}\small\item\em Create a mutex. \item\end{CompactList}\item 
SPHINXBASE\_\-EXPORT int {\bf sbmtx\_\-trylock} ({\bf sbmtx\_\-t} $\ast$mtx)\label{sbthread_8h_3b86c81160360234944737b4eab73125}

\begin{CompactList}\small\item\em Try to acquire a mutex. \item\end{CompactList}\item 
SPHINXBASE\_\-EXPORT int {\bf sbmtx\_\-lock} ({\bf sbmtx\_\-t} $\ast$mtx)\label{sbthread_8h_6615e839f7c8ef3ebb6b288525f002cd}

\begin{CompactList}\small\item\em Acquire a mutex. \item\end{CompactList}\item 
SPHINXBASE\_\-EXPORT int {\bf sbmtx\_\-unlock} ({\bf sbmtx\_\-t} $\ast$mtx)\label{sbthread_8h_f65691258c916c68f1b5d000aaea233f}

\begin{CompactList}\small\item\em Release a mutex. \item\end{CompactList}\item 
SPHINXBASE\_\-EXPORT void {\bf sbmtx\_\-free} ({\bf sbmtx\_\-t} $\ast$mtx)\label{sbthread_8h_a17a6a93744eb813ca80bf098c69bdba}

\begin{CompactList}\small\item\em Dispose of a mutex. \item\end{CompactList}\item 
SPHINXBASE\_\-EXPORT {\bf sbevent\_\-t} $\ast$ {\bf sbevent\_\-init} (void)\label{sbthread_8h_1b3fa1cf6b82dcd82ab8d4124ab12490}

\begin{CompactList}\small\item\em Initialize an event. \item\end{CompactList}\item 
SPHINXBASE\_\-EXPORT void {\bf sbevent\_\-free} ({\bf sbevent\_\-t} $\ast$evt)\label{sbthread_8h_fe8253a0e804a019ad0d8c540eec75af}

\begin{CompactList}\small\item\em Free an event. \item\end{CompactList}\item 
SPHINXBASE\_\-EXPORT int {\bf sbevent\_\-signal} ({\bf sbevent\_\-t} $\ast$evt)\label{sbthread_8h_7c01e3e70c2ab8e961d59db84aa5fa68}

\begin{CompactList}\small\item\em Signal an event. \item\end{CompactList}\item 
SPHINXBASE\_\-EXPORT int {\bf sbevent\_\-wait} ({\bf sbevent\_\-t} $\ast$evt, int sec, int nsec)\label{sbthread_8h_c211760e4dffccf0102db65fb6f2c5b3}

\begin{CompactList}\small\item\em Wait for an event to be signalled. \item\end{CompactList}\end{CompactItemize}


\subsection{Detailed Description}
Simple portable thread functions. 

\begin{Desc}
\item[Author:]David Huggins-Daines $<${\tt dhuggins@cs.cmu.edu}$>$ \end{Desc}


Definition in file {\bf sbthread.h}.

\subsection{Function Documentation}
\index{sbthread.h@{sbthread.h}!sbmsgq\_\-init@{sbmsgq\_\-init}}
\index{sbmsgq\_\-init@{sbmsgq\_\-init}!sbthread.h@{sbthread.h}}
\subsubsection[{sbmsgq\_\-init}]{\setlength{\rightskip}{0pt plus 5cm}SPHINXBASE\_\-EXPORT {\bf sbmsgq\_\-t}$\ast$ sbmsgq\_\-init (size\_\-t {\em depth})}\label{sbthread_8h_535a4d0d3f71c30f32d75b6268cc5e1e}


Create a message queue. 

\begin{Desc}
\item[Parameters:]
\begin{description}
\item[{\em depth}]Depth of the queue. \end{description}
\end{Desc}


Definition at line 444 of file sbthread.c.

References ckd\_\-calloc, and ckd\_\-free().

Referenced by sbthread\_\-start().\index{sbthread.h@{sbthread.h}!sbthread\_\-send@{sbthread\_\-send}}
\index{sbthread\_\-send@{sbthread\_\-send}!sbthread.h@{sbthread.h}}
\subsubsection[{sbthread\_\-send}]{\setlength{\rightskip}{0pt plus 5cm}SPHINXBASE\_\-EXPORT int sbthread\_\-send ({\bf sbthread\_\-t} $\ast$ {\em th}, \/  size\_\-t {\em len}, \/  void const $\ast$ {\em data})}\label{sbthread_8h_932830409403ab4a03f0ffefe907551e}


Send an asynchronous message to a thread. 

Each thread gets a message queue by default, so this is just a wrapper around \doxyref{sbmsgq\_\-send()}{p.}{sbthread_8h_b0591b5cb626be52dd22edf8fa13a3e3}. 

Definition at line 728 of file sbthread.c.

References sbmsgq\_\-send().