\section{include/agc.h File Reference}
\label{agc_8h}\index{include/agc.h@{include/agc.h}}
routine that implements automatic gain control  


{\tt \#include $<$sphinxbase\_\-export.h$>$}\par
{\tt \#include $<$prim\_\-type.h$>$}\par
{\tt \#include $<$fe.h$>$}\par
\subsection*{Data Structures}
\begin{CompactItemize}
\item 
struct {\bf agc\_\-s}
\begin{CompactList}\small\item\em Structure holding data for doing AGC. \item\end{CompactList}\end{CompactItemize}
\subsection*{Typedefs}
\begin{CompactItemize}
\item 
typedef enum {\bf agc\_\-type\_\-e} {\bf agc\_\-type\_\-t}\label{agc_8h_5524df49e0425cc6b1c002bc704a8103}

\begin{CompactList}\small\item\em Types of acoustic gain control to apply to the features. \item\end{CompactList}\item 
typedef struct {\bf agc\_\-s} {\bf agc\_\-t}\label{agc_8h_4998d40c67716fdea6791f8070642dc5}

\begin{CompactList}\small\item\em Structure holding data for doing AGC. \item\end{CompactList}\end{CompactItemize}
\subsection*{Enumerations}
\begin{CompactItemize}
\item 
enum {\bf agc\_\-type\_\-e} \{ \textbf{AGC\_\-NONE} =  0, 
\textbf{AGC\_\-MAX}, 
\textbf{AGC\_\-EMAX}, 
\textbf{AGC\_\-NOISE}
 \}
\begin{CompactList}\small\item\em Types of acoustic gain control to apply to the features. \item\end{CompactList}\end{CompactItemize}
\subsection*{Functions}
\begin{CompactItemize}
\item 
SPHINXBASE\_\-EXPORT {\bf agc\_\-type\_\-t} {\bf agc\_\-type\_\-from\_\-str} (const char $\ast$str)\label{agc_8h_ebd0689591488378192e13f6d2646bc1}

\begin{CompactList}\small\item\em Convert string representation (from command-line) to agc\_\-type\_\-t. \item\end{CompactList}\item 
SPHINXBASE\_\-EXPORT {\bf agc\_\-t} $\ast$ {\bf agc\_\-init} (void)\label{agc_8h_5c7ee7b19f8dcfd0c28b4dc76a283dc7}

\begin{CompactList}\small\item\em Initialize AGC structure with default values. \item\end{CompactList}\item 
SPHINXBASE\_\-EXPORT void {\bf agc\_\-free} ({\bf agc\_\-t} $\ast$agc)\label{agc_8h_6a050fc4b079be05b1946636d5d7f3aa}

\begin{CompactList}\small\item\em Free AGC structure. \item\end{CompactList}\item 
SPHINXBASE\_\-EXPORT void {\bf agc\_\-max} ({\bf agc\_\-t} $\ast$agc, mfcc\_\-t $\ast$$\ast$mfc, int32 n\_\-frame)
\begin{CompactList}\small\item\em Apply AGC to the given mfc vectors (normalize all C0 mfc coefficients in the given input such that the max C0 value is 0, by subtracting the input max C0 from all). \item\end{CompactList}\item 
SPHINXBASE\_\-EXPORT void {\bf agc\_\-emax} ({\bf agc\_\-t} $\ast$agc, mfcc\_\-t $\ast$$\ast$mfc, int32 n\_\-frame)
\begin{CompactList}\small\item\em Apply AGC to the given block of MFC vectors. \item\end{CompactList}\item 
SPHINXBASE\_\-EXPORT void {\bf agc\_\-emax\_\-update} ({\bf agc\_\-t} $\ast$agc)
\begin{CompactList}\small\item\em Update AGC parameters for next utterance. \item\end{CompactList}\item 
SPHINXBASE\_\-EXPORT float32 {\bf agc\_\-emax\_\-get} ({\bf agc\_\-t} $\ast$agc)\label{agc_8h_7b439fb5d36250d09bb9d459c1e28ba5}

\begin{CompactList}\small\item\em Get the current AGC maximum estimate. \item\end{CompactList}\item 
SPHINXBASE\_\-EXPORT void {\bf agc\_\-emax\_\-set} ({\bf agc\_\-t} $\ast$agc, float32 m)\label{agc_8h_4fd17f224b5d8f7bfcaa9389d11716eb}

\begin{CompactList}\small\item\em Set the current AGC maximum estimate. \item\end{CompactList}\item 
SPHINXBASE\_\-EXPORT void {\bf agc\_\-noise} ({\bf agc\_\-t} $\ast$agc, mfcc\_\-t $\ast$$\ast$mfc, int32 n\_\-frame)
\begin{CompactList}\small\item\em Apply AGC using noise threshold to the given block of MFC vectors. \item\end{CompactList}\item 
SPHINXBASE\_\-EXPORT float32 {\bf agc\_\-get\_\-threshold} ({\bf agc\_\-t} $\ast$agc)\label{agc_8h_77d0987174a1b3c6e8fcd63fe82f33ce}

\begin{CompactList}\small\item\em Get the current AGC noise threshold. \item\end{CompactList}\item 
SPHINXBASE\_\-EXPORT void {\bf agc\_\-set\_\-threshold} ({\bf agc\_\-t} $\ast$agc, float32 threshold)\label{agc_8h_aaa9e15f192c91ad64c343b7c6db6714}

\begin{CompactList}\small\item\em Set the current AGC noise threshold. \item\end{CompactList}\end{CompactItemize}
\subsection*{Variables}
\begin{CompactItemize}
\item 
SPHINXBASE\_\-EXPORT const char $\ast$ {\bf agc\_\-type\_\-str} [$\,$]
\begin{CompactList}\small\item\em String representations of agc\_\-type\_\-t values. \item\end{CompactList}\end{CompactItemize}


\subsection{Detailed Description}
routine that implements automatic gain control 

\begin{Desc}
\item[Warning:]This function may not be fully compatible with SphinxTrain's family of AGC.\end{Desc}
This implements AGC. 

Definition in file {\bf agc.h}.

\subsection{Function Documentation}
\index{agc.h@{agc.h}!agc\_\-emax@{agc\_\-emax}}
\index{agc\_\-emax@{agc\_\-emax}!agc.h@{agc.h}}
\subsubsection[{agc\_\-emax}]{\setlength{\rightskip}{0pt plus 5cm}SPHINXBASE\_\-EXPORT void agc\_\-emax ({\bf agc\_\-t} $\ast$ {\em agc}, \/  mfcc\_\-t $\ast$$\ast$ {\em mfc}, \/  int32 {\em n\_\-frame})}\label{agc_8h_c2cdd4c519b46824c5b28c5b769b5ecd}


Apply AGC to the given block of MFC vectors. 

Unlike \doxyref{agc\_\-max()}{p.}{agc_8h_29a2a4dd80141af1c3476094c353b739} this does not require the entire utterance to be available. Call \doxyref{agc\_\-emax\_\-update()}{p.}{agc_8h_f47b6004f2f963ae0019a67450b892c2} at the end of each utterance to update the AGC parameters. \begin{Desc}
\item[Parameters: ]\par
\begin{description}
\item[{\em 
agc}]In: AGC structure \item[{\em 
mfc}]In/Out: mfc[f] = cepstrum vector in frame f \item[{\em 
n\_\-frame}]In: number of frames of cepstrum vectors supplied \end{description}
\end{Desc}


Definition at line 142 of file agc.c.

References agc\_\-emax(), agc\_\-s::max, agc\_\-s::obs\_\-frame, and agc\_\-s::obs\_\-max.

Referenced by agc\_\-emax().\index{agc.h@{agc.h}!agc\_\-emax\_\-update@{agc\_\-emax\_\-update}}
\index{agc\_\-emax\_\-update@{agc\_\-emax\_\-update}!agc.h@{agc.h}}
\subsubsection[{agc\_\-emax\_\-update}]{\setlength{\rightskip}{0pt plus 5cm}SPHINXBASE\_\-EXPORT void agc\_\-emax\_\-update ({\bf agc\_\-t} $\ast$ {\em agc})}\label{agc_8h_f47b6004f2f963ae0019a67450b892c2}


Update AGC parameters for next utterance. 

\begin{Desc}
\item[Parameters: ]\par
\begin{description}
\item[{\em 
agc}]In: AGC structure \end{description}
\end{Desc}


Definition at line 159 of file agc.c.

References agc\_\-emax\_\-update(), E\_\-INFO, agc\_\-s::max, agc\_\-s::obs\_\-frame, agc\_\-s::obs\_\-max, agc\_\-s::obs\_\-max\_\-sum, and agc\_\-s::obs\_\-utt.

Referenced by agc\_\-emax\_\-update().\index{agc.h@{agc.h}!agc\_\-max@{agc\_\-max}}
\index{agc\_\-max@{agc\_\-max}!agc.h@{agc.h}}
\subsubsection[{agc\_\-max}]{\setlength{\rightskip}{0pt plus 5cm}SPHINXBASE\_\-EXPORT void agc\_\-max ({\bf agc\_\-t} $\ast$ {\em agc}, \/  mfcc\_\-t $\ast$$\ast$ {\em mfc}, \/  int32 {\em n\_\-frame})}\label{agc_8h_29a2a4dd80141af1c3476094c353b739}


Apply AGC to the given mfc vectors (normalize all C0 mfc coefficients in the given input such that the max C0 value is 0, by subtracting the input max C0 from all). 

This function operates on an entire utterance at a time. Hence, the entire utterance must be available beforehand (batchmode). \begin{Desc}
\item[Parameters: ]\par
\begin{description}
\item[{\em 
agc}]In: AGC structure (not used) \item[{\em 
mfc}]In/Out: mfc[f] = cepstrum vector in frame f \item[{\em 
n\_\-frame}]In: number of frames of cepstrum vectors supplied \end{description}
\end{Desc}


Definition at line 109 of file agc.c.

References agc\_\-max(), E\_\-INFO, agc\_\-s::obs\_\-frame, and agc\_\-s::obs\_\-max.

Referenced by agc\_\-max().\index{agc.h@{agc.h}!agc\_\-noise@{agc\_\-noise}}
\index{agc\_\-noise@{agc\_\-noise}!agc.h@{agc.h}}
\subsubsection[{agc\_\-noise}]{\setlength{\rightskip}{0pt plus 5cm}SPHINXBASE\_\-EXPORT void agc\_\-noise ({\bf agc\_\-t} $\ast$ {\em agc}, \/  mfcc\_\-t $\ast$$\ast$ {\em mfc}, \/  int32 {\em n\_\-frame})}\label{agc_8h_e65d4be1d74aea11b7e16e3777272d13}


Apply AGC using noise threshold to the given block of MFC vectors. 

\begin{Desc}
\item[Parameters: ]\par
\begin{description}
\item[{\em 
agc}]In: AGC structure \item[{\em 
mfc}]In/Out: mfc[f] = cepstrum vector in frame f \item[{\em 
n\_\-frame}]In: number of frames of cepstrum vectors supplied \end{description}
\end{Desc}


Definition at line 180 of file agc.c.

References agc\_\-noise(), E\_\-INFO, and agc\_\-s::noise\_\-thresh.

Referenced by agc\_\-noise().

\subsection{Variable Documentation}
\index{agc.h@{agc.h}!agc\_\-type\_\-str@{agc\_\-type\_\-str}}
\index{agc\_\-type\_\-str@{agc\_\-type\_\-str}!agc.h@{agc.h}}
\subsubsection[{agc\_\-type\_\-str}]{\setlength{\rightskip}{0pt plus 5cm}SPHINXBASE\_\-EXPORT const char$\ast$ {\bf agc\_\-type\_\-str}[$\,$]}\label{agc_8h_6ea1b2b3d482cf08eb36084629503c80}


String representations of agc\_\-type\_\-t values. 



Definition at line 70 of file agc.c.

Referenced by agc\_\-type\_\-from\_\-str(), and feat\_\-init().