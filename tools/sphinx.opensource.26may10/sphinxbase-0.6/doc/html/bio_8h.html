<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>SphinxBase: include/bio.h File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>include/bio.h File Reference</h1>Cross platform binary IO to process files in sphinx3 format.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;stdio.h&gt;</code><br>
<code>#include &lt;sphinxbase_export.h&gt;</code><br>
<code>#include &lt;<a class="el" href="prim__type_8h-source.html">prim_type.h</a>&gt;</code><br>
<code>#include &lt;byteorder.h&gt;</code><br>

<p>
<a href="bio_8h-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="c08e1e4728563a03ff6c937bfa8fd845"></a><!-- doxytag: member="bio.h::BYTE_ORDER_MAGIC" ref="c08e1e4728563a03ff6c937bfa8fd845" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>BYTE_ORDER_MAGIC</b>&nbsp;&nbsp;&nbsp;(0x11223344)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="bio_8h.html#bf9af8ac9d8a67710371365812869c92">REVERSE_SENSE_SWAP_INT16</a>(x)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">"reversed senses" SWAP, ARCHAN: This is still incorporated in Sphinx 3 because lm3g2dmp used it.  <a href="#bf9af8ac9d8a67710371365812869c92"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="2c277e579a007b5c46bd762a7d18b2cf"></a><!-- doxytag: member="bio.h::REVERSE_SENSE_SWAP_INT32" ref="2c277e579a007b5c46bd762a7d18b2cf" args="(x)" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>REVERSE_SENSE_SWAP_INT32</b>(x)</td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">SPHINXBASE_EXPORT int32&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="bio_8h.html#7a155ff51740f1d9a31f7bb7b6e4bc3a">bio_readhdr</a> (FILE *fp, char ***name, char ***val, int32 *swap)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read binary file format header: has the following format.  <a href="#7a155ff51740f1d9a31f7bb7b6e4bc3a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">SPHINXBASE_EXPORT int32&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="bio_8h.html#9662c09be1f18377488dedb8e7ca0bfd">bio_writehdr_version</a> (FILE *fp, char *version)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Write a simple binary file header, containing only the version string.  <a href="#9662c09be1f18377488dedb8e7ca0bfd"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">SPHINXBASE_EXPORT void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="bio_8h.html#db3c858a50381aeff022ccd4271af2d9">bio_hdrarg_free</a> (char **name, char **val)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Free name and value strings previously allocated and returned by bio_readhdr.  <a href="#db3c858a50381aeff022ccd4271af2d9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">SPHINXBASE_EXPORT int32&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="bio_8h.html#7068bb61e421bc46a6989cef3b37c833">bio_fread</a> (void *buf, int32 el_sz, int32 n_el, FILE *fp, int32 swap, uint32 *chksum)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Like fread but perform byteswapping and accumulate checksum (the 2 extra arguments).  <a href="#7068bb61e421bc46a6989cef3b37c833"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">SPHINXBASE_EXPORT int32&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="bio_8h.html#3b131beb20492e1a6f46c9b4dd81a64e">bio_fwrite</a> (void *buf, int32 el_sz, int32 n_el, FILE *fp, int32 swap, uint32 *chksum)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Like fwrite but perform byteswapping and accumulate checksum (the 2 extra arguments).  <a href="#3b131beb20492e1a6f46c9b4dd81a64e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">SPHINXBASE_EXPORT int32&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="bio_8h.html#aeda1ca5a5c0ca5a9e5b4820c442bbe5">bio_fread_1d</a> (void **buf, size_t el_sz, uint32 *n_el, FILE *fp, int32 sw, uint32 *ck)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read a 1-d array (fashioned after fread):.  <a href="#aeda1ca5a5c0ca5a9e5b4820c442bbe5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">SPHINXBASE_EXPORT int32&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="bio_8h.html#70604d0f8035f0868f9284fa82e4fdb8">bio_fread_2d</a> (void ***arr, size_t e_sz, uint32 *d1, uint32 *d2, FILE *fp, uint32 swap, uint32 *chksum)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read a 2-d matrix:.  <a href="#70604d0f8035f0868f9284fa82e4fdb8"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">SPHINXBASE_EXPORT int32&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="bio_8h.html#ca6a6b71d02b9e5ca6b136a28640e0c1">bio_fread_3d</a> (void ****arr, size_t e_sz, uint32 *d1, uint32 *d2, uint32 *d3, FILE *fp, uint32 swap, uint32 *chksum)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read a 3-d array (set of matrices).  <a href="#ca6a6b71d02b9e5ca6b136a28640e0c1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">SPHINXBASE_EXPORT void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="bio_8h.html#d07e2ee9f2f01d3ff3232008098295a0">bio_verify_chksum</a> (FILE *fp, int32 byteswap, uint32 chksum)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read and verify checksum at the end of binary file.  <a href="#d07e2ee9f2f01d3ff3232008098295a0"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Cross platform binary IO to process files in sphinx3 format. 
<p>

<p>Definition in file <a class="el" href="bio_8h-source.html">bio.h</a>.</p>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="bf9af8ac9d8a67710371365812869c92"></a><!-- doxytag: member="bio.h::REVERSE_SENSE_SWAP_INT16" ref="bf9af8ac9d8a67710371365812869c92" args="(x)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define REVERSE_SENSE_SWAP_INT16          </td>
          <td>(</td>
          <td class="paramtype">x&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
"reversed senses" SWAP, ARCHAN: This is still incorporated in Sphinx 3 because lm3g2dmp used it. 
<p>
Don't think that I am very happy with it. 
<p>Definition at line <a class="el" href="bio_8h-source.html#l00102">102</a> of file <a class="el" href="bio_8h-source.html">bio.h</a>.</p>

</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="7068bb61e421bc46a6989cef3b37c833"></a><!-- doxytag: member="bio.h::bio_fread" ref="7068bb61e421bc46a6989cef3b37c833" args="(void *buf, int32 el_sz, int32 n_el, FILE *fp, int32 swap, uint32 *chksum)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SPHINXBASE_EXPORT int32 bio_fread           </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32&nbsp;</td>
          <td class="paramname"> <em>el_sz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32&nbsp;</td>
          <td class="paramname"> <em>n_el</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FILE *&nbsp;</td>
          <td class="paramname"> <em>fp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32&nbsp;</td>
          <td class="paramname"> <em>swap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32 *&nbsp;</td>
          <td class="paramname"> <em>chksum</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Like fread but perform byteswapping and accumulate checksum (the 2 extra arguments). 
<p>
But unlike fread, returns -1 if required number of elements (n_el) not read; also, no byteswapping or checksum accumulation is performed in that case. <dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>fp</em>&nbsp;</td><td>
In: An input file pointer </td></tr>
<tr><td valign="top"><em>swap</em>&nbsp;</td><td>
In: Byteswap iff (swap != 0) </td></tr>
<tr><td valign="top"><em>chksum</em>&nbsp;</td><td>
In/Out: Accumulated checksum </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="bio_8c-source.html#l00274">274</a> of file <a class="el" href="bio_8c-source.html">bio.c</a>.</p>

<p>References <a class="el" href="bio_8c-source.html#l00274">bio_fread()</a>.</p>

<p>Referenced by <a class="el" href="bio_8c-source.html#l00274">bio_fread()</a>, <a class="el" href="bio_8c-source.html#l00312">bio_fread_1d()</a>, <a class="el" href="bio_8c-source.html#l00332">bio_fread_2d()</a>, <a class="el" href="bio_8c-source.html#l00378">bio_fread_3d()</a>, and <a class="el" href="logmath_8c-source.html#l00164">logmath_read()</a>.</p>

</div>
</div><p>
<a class="anchor" name="aeda1ca5a5c0ca5a9e5b4820c442bbe5"></a><!-- doxytag: member="bio.h::bio_fread_1d" ref="aeda1ca5a5c0ca5a9e5b4820c442bbe5" args="(void **buf, size_t el_sz, uint32 *n_el, FILE *fp, int32 sw, uint32 *ck)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SPHINXBASE_EXPORT int32 bio_fread_1d           </td>
          <td>(</td>
          <td class="paramtype">void **&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>el_sz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32 *&nbsp;</td>
          <td class="paramname"> <em>n_el</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FILE *&nbsp;</td>
          <td class="paramname"> <em>fp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32&nbsp;</td>
          <td class="paramname"> <em>sw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32 *&nbsp;</td>
          <td class="paramname"> <em>ck</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Read a 1-d array (fashioned after fread):. 
<p>
<ul>
<li>4-byte array size (returned in n_el)</li><li>memory allocated for the array and read (returned in buf)</li></ul>
<p>
Byteswapping and checksum accumulation performed as necessary. Fails fatally if expected data not read. Return value: number of array elements allocated and read; -1 if error. <dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>buf</em>&nbsp;</td><td>
Out: contains array data; allocated by this function; can be freed using ckd_free </td></tr>
<tr><td valign="top"><em>el_sz</em>&nbsp;</td><td>
In: Array element size </td></tr>
<tr><td valign="top"><em>n_el</em>&nbsp;</td><td>
Out: Number of array elements allocated/read </td></tr>
<tr><td valign="top"><em>fp</em>&nbsp;</td><td>
In: File to read </td></tr>
<tr><td valign="top"><em>sw</em>&nbsp;</td><td>
In: Byteswap iff (swap != 0) </td></tr>
<tr><td valign="top"><em>ck</em>&nbsp;</td><td>
In/Out: Accumulated checksum </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="bio_8c-source.html#l00312">312</a> of file <a class="el" href="bio_8c-source.html">bio.c</a>.</p>

<p>References <a class="el" href="bio_8c-source.html#l00274">bio_fread()</a>, <a class="el" href="bio_8c-source.html#l00312">bio_fread_1d()</a>, <a class="el" href="ckd__alloc_8h-source.html#l00230">ckd_calloc</a>, and <a class="el" href="err_8h-source.html#l00139">E_FATAL</a>.</p>

<p>Referenced by <a class="el" href="bio_8c-source.html#l00312">bio_fread_1d()</a>, <a class="el" href="bio_8c-source.html#l00332">bio_fread_2d()</a>, and <a class="el" href="bio_8c-source.html#l00378">bio_fread_3d()</a>.</p>

</div>
</div><p>
<a class="anchor" name="70604d0f8035f0868f9284fa82e4fdb8"></a><!-- doxytag: member="bio.h::bio_fread_2d" ref="70604d0f8035f0868f9284fa82e4fdb8" args="(void ***arr, size_t e_sz, uint32 *d1, uint32 *d2, FILE *fp, uint32 swap, uint32 *chksum)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SPHINXBASE_EXPORT int32 bio_fread_2d           </td>
          <td>(</td>
          <td class="paramtype">void ***&nbsp;</td>
          <td class="paramname"> <em>arr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>e_sz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32 *&nbsp;</td>
          <td class="paramname"> <em>d1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32 *&nbsp;</td>
          <td class="paramname"> <em>d2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FILE *&nbsp;</td>
          <td class="paramname"> <em>fp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32&nbsp;</td>
          <td class="paramname"> <em>swap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32 *&nbsp;</td>
          <td class="paramname"> <em>chksum</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Read a 2-d matrix:. 
<p>
<ul>
<li>4-byte # rows, # columns (returned in d1, d2, d3)</li><li>memory allocated for the array and read (returned in buf)</li></ul>
<p>
Byteswapping and checksum accumulation performed as necessary. Fails fatally if expected data not read. Return value: number of array elements allocated and read; -1 if error. 
<p>Definition at line <a class="el" href="bio_8c-source.html#l00332">332</a> of file <a class="el" href="bio_8c-source.html">bio.c</a>.</p>

<p>References <a class="el" href="bio_8c-source.html#l00274">bio_fread()</a>, <a class="el" href="bio_8c-source.html#l00312">bio_fread_1d()</a>, <a class="el" href="bio_8c-source.html#l00332">bio_fread_2d()</a>, <a class="el" href="ckd__alloc_8h-source.html#l00264">ckd_alloc_2d_ptr</a>, and <a class="el" href="err_8h-source.html#l00154">E_ERROR_SYSTEM</a>.</p>

<p>Referenced by <a class="el" href="bio_8c-source.html#l00332">bio_fread_2d()</a>.</p>

</div>
</div><p>
<a class="anchor" name="ca6a6b71d02b9e5ca6b136a28640e0c1"></a><!-- doxytag: member="bio.h::bio_fread_3d" ref="ca6a6b71d02b9e5ca6b136a28640e0c1" args="(void ****arr, size_t e_sz, uint32 *d1, uint32 *d2, uint32 *d3, FILE *fp, uint32 swap, uint32 *chksum)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SPHINXBASE_EXPORT int32 bio_fread_3d           </td>
          <td>(</td>
          <td class="paramtype">void ****&nbsp;</td>
          <td class="paramname"> <em>arr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>e_sz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32 *&nbsp;</td>
          <td class="paramname"> <em>d1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32 *&nbsp;</td>
          <td class="paramname"> <em>d2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32 *&nbsp;</td>
          <td class="paramname"> <em>d3</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FILE *&nbsp;</td>
          <td class="paramname"> <em>fp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32&nbsp;</td>
          <td class="paramname"> <em>swap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32 *&nbsp;</td>
          <td class="paramname"> <em>chksum</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Read a 3-d array (set of matrices). 
<p>
<ul>
<li>4-byte # matrices, # rows, # columns (returned in d1, d2, d3)</li><li>memory allocated for the array and read (returned in buf)</li></ul>
<p>
Byteswapping and checksum accumulation performed as necessary. Fails fatally if expected data not read. Return value: number of array elements allocated and read; -1 if error. 
<p>Definition at line <a class="el" href="bio_8c-source.html#l00378">378</a> of file <a class="el" href="bio_8c-source.html">bio.c</a>.</p>

<p>References <a class="el" href="bio_8c-source.html#l00274">bio_fread()</a>, <a class="el" href="bio_8c-source.html#l00312">bio_fread_1d()</a>, <a class="el" href="bio_8c-source.html#l00378">bio_fread_3d()</a>, <a class="el" href="ckd__alloc_8h-source.html#l00275">ckd_alloc_3d_ptr</a>, and <a class="el" href="err_8h-source.html#l00154">E_ERROR_SYSTEM</a>.</p>

<p>Referenced by <a class="el" href="bio_8c-source.html#l00378">bio_fread_3d()</a>, and <a class="el" href="lda_8c-source.html#l00061">feat_read_lda()</a>.</p>

</div>
</div><p>
<a class="anchor" name="3b131beb20492e1a6f46c9b4dd81a64e"></a><!-- doxytag: member="bio.h::bio_fwrite" ref="3b131beb20492e1a6f46c9b4dd81a64e" args="(void *buf, int32 el_sz, int32 n_el, FILE *fp, int32 swap, uint32 *chksum)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SPHINXBASE_EXPORT int32 bio_fwrite           </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32&nbsp;</td>
          <td class="paramname"> <em>el_sz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32&nbsp;</td>
          <td class="paramname"> <em>n_el</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FILE *&nbsp;</td>
          <td class="paramname"> <em>fp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32&nbsp;</td>
          <td class="paramname"> <em>swap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32 *&nbsp;</td>
          <td class="paramname"> <em>chksum</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Like fwrite but perform byteswapping and accumulate checksum (the 2 extra arguments). 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>the number of elemens written (like fwrite). </dd></dl>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>fp</em>&nbsp;</td><td>
In: An input file pointer </td></tr>
<tr><td valign="top"><em>swap</em>&nbsp;</td><td>
In: Byteswap iff (swap != 0) </td></tr>
<tr><td valign="top"><em>chksum</em>&nbsp;</td><td>
In/Out: Accumulated checksum </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="bio_8c-source.html#l00290">290</a> of file <a class="el" href="bio_8c-source.html">bio.c</a>.</p>

<p>References <a class="el" href="bio_8c-source.html#l00290">bio_fwrite()</a>, <a class="el" href="ckd__alloc_8h-source.html#l00230">ckd_calloc</a>, and <a class="el" href="ckd__alloc_8c-source.html#l00241">ckd_free()</a>.</p>

<p>Referenced by <a class="el" href="bio_8c-source.html#l00290">bio_fwrite()</a>, and <a class="el" href="logmath_8c-source.html#l00272">logmath_write()</a>.</p>

</div>
</div><p>
<a class="anchor" name="db3c858a50381aeff022ccd4271af2d9"></a><!-- doxytag: member="bio.h::bio_hdrarg_free" ref="db3c858a50381aeff022ccd4271af2d9" args="(char **name, char **val)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SPHINXBASE_EXPORT void bio_hdrarg_free           </td>
          <td>(</td>
          <td class="paramtype">char **&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&nbsp;</td>
          <td class="paramname"> <em>val</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Free name and value strings previously allocated and returned by bio_readhdr. 
<p>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>name</em>&nbsp;</td><td>
In: Array previously returned by bio_readhdr </td></tr>
<tr><td valign="top"><em>val</em>&nbsp;</td><td>
In: Array previously returned by bio_readhdr </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="bio_8c-source.html#l00121">121</a> of file <a class="el" href="bio_8c-source.html">bio.c</a>.</p>

<p>References <a class="el" href="bio_8c-source.html#l00121">bio_hdrarg_free()</a>, and <a class="el" href="ckd__alloc_8c-source.html#l00241">ckd_free()</a>.</p>

<p>Referenced by <a class="el" href="bio_8c-source.html#l00121">bio_hdrarg_free()</a>, <a class="el" href="lda_8c-source.html#l00061">feat_read_lda()</a>, and <a class="el" href="logmath_8c-source.html#l00164">logmath_read()</a>.</p>

</div>
</div><p>
<a class="anchor" name="7a155ff51740f1d9a31f7bb7b6e4bc3a"></a><!-- doxytag: member="bio.h::bio_readhdr" ref="7a155ff51740f1d9a31f7bb7b6e4bc3a" args="(FILE *fp, char ***name, char ***val, int32 *swap)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SPHINXBASE_EXPORT int32 bio_readhdr           </td>
          <td>(</td>
          <td class="paramtype">FILE *&nbsp;</td>
          <td class="paramname"> <em>fp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char ***&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char ***&nbsp;</td>
          <td class="paramname"> <em>val</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32 *&nbsp;</td>
          <td class="paramname"> <em>swap</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Read binary file format header: has the following format. 
<p>
<pre>
     s3
     &lt;argument-name&gt; &lt;argument-value&gt;
     &lt;argument-name&gt; &lt;argument-value&gt;
     ...
     endhdr
     4-byte byte-order word used to find file byte ordering relative to host machine.
 </pre> Lines beginning with # are ignored. Memory for name and val allocated by this function; use bio_hdrarg_free to free them. <dl class="return" compact><dt><b>Returns:</b></dt><dd>: 0 if successful, -1 otherwise. </dd></dl>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>fp</em>&nbsp;</td><td>
In: File to read </td></tr>
<tr><td valign="top"><em>name</em>&nbsp;</td><td>
Out: array of argument name strings read </td></tr>
<tr><td valign="top"><em>val</em>&nbsp;</td><td>
Out: corresponding value strings read </td></tr>
<tr><td valign="top"><em>swap</em>&nbsp;</td><td>
Out: file needs byteswapping iff (*swap) </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="bio_8c-source.html#l00153">153</a> of file <a class="el" href="bio_8c-source.html">bio.c</a>.</p>

<p>References <a class="el" href="bio_8c-source.html#l00153">bio_readhdr()</a>, <a class="el" href="ckd__alloc_8h-source.html#l00230">ckd_calloc</a>, <a class="el" href="ckd__alloc_8h-source.html#l00246">ckd_salloc</a>, and <a class="el" href="err_8h-source.html#l00139">E_FATAL</a>.</p>

<p>Referenced by <a class="el" href="bio_8c-source.html#l00153">bio_readhdr()</a>, <a class="el" href="lda_8c-source.html#l00061">feat_read_lda()</a>, and <a class="el" href="logmath_8c-source.html#l00164">logmath_read()</a>.</p>

</div>
</div><p>
<a class="anchor" name="d07e2ee9f2f01d3ff3232008098295a0"></a><!-- doxytag: member="bio.h::bio_verify_chksum" ref="d07e2ee9f2f01d3ff3232008098295a0" args="(FILE *fp, int32 byteswap, uint32 chksum)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SPHINXBASE_EXPORT void bio_verify_chksum           </td>
          <td>(</td>
          <td class="paramtype">FILE *&nbsp;</td>
          <td class="paramname"> <em>fp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32&nbsp;</td>
          <td class="paramname"> <em>byteswap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32&nbsp;</td>
          <td class="paramname"> <em>chksum</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Read and verify checksum at the end of binary file. 
<p>
Fails fatally if there is a mismatch. <dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>fp</em>&nbsp;</td><td>
In: File to read </td></tr>
<tr><td valign="top"><em>byteswap</em>&nbsp;</td><td>
In: Byteswap iff (swap != 0) </td></tr>
<tr><td valign="top"><em>chksum</em>&nbsp;</td><td>
In: Value to compare with checksum in file </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="bio_8c-source.html#l00440">440</a> of file <a class="el" href="bio_8c-source.html">bio.c</a>.</p>

<p>References <a class="el" href="bio_8c-source.html#l00440">bio_verify_chksum()</a>, and <a class="el" href="err_8h-source.html#l00139">E_FATAL</a>.</p>

<p>Referenced by <a class="el" href="bio_8c-source.html#l00440">bio_verify_chksum()</a>, and <a class="el" href="logmath_8c-source.html#l00164">logmath_read()</a>.</p>

</div>
</div><p>
<a class="anchor" name="9662c09be1f18377488dedb8e7ca0bfd"></a><!-- doxytag: member="bio.h::bio_writehdr_version" ref="9662c09be1f18377488dedb8e7ca0bfd" args="(FILE *fp, char *version)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SPHINXBASE_EXPORT int32 bio_writehdr_version           </td>
          <td>(</td>
          <td class="paramtype">FILE *&nbsp;</td>
          <td class="paramname"> <em>fp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>version</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Write a simple binary file header, containing only the version string. 
<p>
Also write the byte order magic word. <dl class="return" compact><dt><b>Returns:</b></dt><dd>: 0 if successful, -1 otherwise. </dd></dl>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>fp</em>&nbsp;</td><td>
Output: File to write </td></tr>
<tr><td valign="top"><em>version</em>&nbsp;</td><td>
Input: A string of version </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="bio_8c-source.html#l00135">135</a> of file <a class="el" href="bio_8c-source.html">bio.c</a>.</p>

<p>References <a class="el" href="bio_8c-source.html#l00135">bio_writehdr_version()</a>.</p>

<p>Referenced by <a class="el" href="bio_8c-source.html#l00135">bio_writehdr_version()</a>.</p>

</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Sat Dec 3 20:28:37 2011 for SphinxBase by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.7.1 </small></address>
</body>
</html>
