<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>SphinxBase: listelem_alloc_s Struct Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="functions.html"><span>Data&nbsp;Fields</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>listelem_alloc_s Struct Reference</h1><!-- doxytag: class="listelem_alloc_s" -->Fast linked list allocator.  
<a href="#_details">More...</a>
<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Data Fields</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="2c3be8623c5bb2d4afb3ad888790a4eb"></a><!-- doxytag: member="listelem_alloc_s::freelist" ref="2c3be8623c5bb2d4afb3ad888790a4eb" args="" -->
char **&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlistelem__alloc__s.html#2c3be8623c5bb2d4afb3ad888790a4eb">freelist</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">ptr to first element in freelist <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structgnode__s.html">glist_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlistelem__alloc__s.html#1216578b1d5416dc0a03c802cfa1def9">blocks</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Linked list of blocks allocated.  <a href="#1216578b1d5416dc0a03c802cfa1def9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="9e27c7163c45a43f8dfd667cbc014f49"></a><!-- doxytag: member="listelem_alloc_s::elemsize" ref="9e27c7163c45a43f8dfd667cbc014f49" args="" -->
size_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlistelem__alloc__s.html#9e27c7163c45a43f8dfd667cbc014f49">elemsize</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Number of (char *) in element. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="ef58c358a0b764872b322e6c3c4c19b8"></a><!-- doxytag: member="listelem_alloc_s::blocksize" ref="ef58c358a0b764872b322e6c3c4c19b8" args="" -->
size_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlistelem__alloc__s.html#ef58c358a0b764872b322e6c3c4c19b8">blocksize</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Number of elements to alloc if run out of free elments. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="b96fd1e097105a34d6ae2e79ae8e2520"></a><!-- doxytag: member="listelem_alloc_s::blk_alloc" ref="b96fd1e097105a34d6ae2e79ae8e2520" args="" -->
size_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlistelem__alloc__s.html#b96fd1e097105a34d6ae2e79ae8e2520">blk_alloc</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Number of alloc operations before increasing blocksize. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="2a2fa0a7a1e03d6aee2f685dbc1db774"></a><!-- doxytag: member="listelem_alloc_s::n_alloc" ref="2a2fa0a7a1e03d6aee2f685dbc1db774" args="" -->
size_t&nbsp;</td><td class="memItemRight" valign="bottom"><b>n_alloc</b></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="dde313f665b6f2be9ea22f4d209e576d"></a><!-- doxytag: member="listelem_alloc_s::n_freed" ref="dde313f665b6f2be9ea22f4d209e576d" args="" -->
size_t&nbsp;</td><td class="memItemRight" valign="bottom"><b>n_freed</b></td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Fast linked list allocator. 
<p>
We keep a separate linked list for each element-size. Element-size must be a multiple of pointer-size.<p>
Initially a block of empty elements is allocated, where the first machine word in each element points to the next available element. To allocate, we use this pointer to move the freelist to the next element, then return the current element.<p>
The last element in the list starts with a NULL pointer, which is used as a signal to allocate a new block of elements.<p>
In order to be able to actually release the memory allocated, we have to add a linked list of block pointers. This shouldn't create much overhead since we never access it except when freeing the allocator. 
<p>Definition at line <a class="el" href="listelem__alloc_8c-source.html#l00065">65</a> of file <a class="el" href="listelem__alloc_8c-source.html">listelem_alloc.c</a>.</p>
<hr><h2>Field Documentation</h2>
<a class="anchor" name="1216578b1d5416dc0a03c802cfa1def9"></a><!-- doxytag: member="listelem_alloc_s::blocks" ref="1216578b1d5416dc0a03c802cfa1def9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structgnode__s.html">glist_t</a> <a class="el" href="structlistelem__alloc__s.html#1216578b1d5416dc0a03c802cfa1def9">listelem_alloc_s::blocks</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Linked list of blocks allocated. 
<p>

<p>Definition at line <a class="el" href="listelem__alloc_8c-source.html#l00067">67</a> of file <a class="el" href="listelem__alloc_8c-source.html">listelem_alloc.c</a>.</p>

<p>Referenced by <a class="el" href="listelem__alloc_8c-source.html#l00110">listelem_alloc_free()</a>, <a class="el" href="listelem__alloc_8c-source.html#l00083">listelem_alloc_init()</a>, and <a class="el" href="listelem__alloc_8c-source.html#l00189">listelem_stats()</a>.</p>

</div>
</div><p>
<hr>The documentation for this struct was generated from the following file:<ul>
<li>src/libsphinxbase/util/<a class="el" href="listelem__alloc_8c-source.html">listelem_alloc.c</a></ul>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Sat Dec 3 20:28:41 2011 for SphinxBase by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.7.1 </small></address>
</body>
</html>
