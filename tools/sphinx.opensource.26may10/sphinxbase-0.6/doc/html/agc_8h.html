<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>SphinxBase: include/agc.h File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>include/agc.h File Reference</h1>routine that implements automatic gain control  
<a href="#_details">More...</a>
<p>
<code>#include &lt;sphinxbase_export.h&gt;</code><br>
<code>#include &lt;<a class="el" href="prim__type_8h-source.html">prim_type.h</a>&gt;</code><br>
<code>#include &lt;fe.h&gt;</code><br>

<p>
<a href="agc_8h-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structagc__s.html">agc_s</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Structure holding data for doing AGC.  <a href="structagc__s.html#_details">More...</a><br></td></tr>
<tr><td colspan="2"><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="5524df49e0425cc6b1c002bc704a8103"></a><!-- doxytag: member="agc.h::agc_type_t" ref="5524df49e0425cc6b1c002bc704a8103" args="" -->
typedef enum <a class="el" href="agc_8h.html#ef1d2c7e32d37aa84d70c2f3675fc923">agc_type_e</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="agc_8h.html#5524df49e0425cc6b1c002bc704a8103">agc_type_t</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Types of acoustic gain control to apply to the features. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="4998d40c67716fdea6791f8070642dc5"></a><!-- doxytag: member="agc.h::agc_t" ref="4998d40c67716fdea6791f8070642dc5" args="" -->
typedef struct <a class="el" href="structagc__s.html">agc_s</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="agc_8h.html#4998d40c67716fdea6791f8070642dc5">agc_t</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Structure holding data for doing AGC. <br></td></tr>
<tr><td colspan="2"><br><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="agc_8h.html#ef1d2c7e32d37aa84d70c2f3675fc923">agc_type_e</a> { <b>AGC_NONE</b> =  0, 
<b>AGC_MAX</b>, 
<b>AGC_EMAX</b>, 
<b>AGC_NOISE</b>
 }</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Types of acoustic gain control to apply to the features. <br></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="ebd0689591488378192e13f6d2646bc1"></a><!-- doxytag: member="agc.h::agc_type_from_str" ref="ebd0689591488378192e13f6d2646bc1" args="(const char *str)" -->
SPHINXBASE_EXPORT <a class="el" href="agc_8h.html#5524df49e0425cc6b1c002bc704a8103">agc_type_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="agc_8h.html#ebd0689591488378192e13f6d2646bc1">agc_type_from_str</a> (const char *str)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Convert string representation (from command-line) to agc_type_t. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="5c7ee7b19f8dcfd0c28b4dc76a283dc7"></a><!-- doxytag: member="agc.h::agc_init" ref="5c7ee7b19f8dcfd0c28b4dc76a283dc7" args="(void)" -->
SPHINXBASE_EXPORT <a class="el" href="structagc__s.html">agc_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="agc_8h.html#5c7ee7b19f8dcfd0c28b4dc76a283dc7">agc_init</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize AGC structure with default values. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="6a050fc4b079be05b1946636d5d7f3aa"></a><!-- doxytag: member="agc.h::agc_free" ref="6a050fc4b079be05b1946636d5d7f3aa" args="(agc_t *agc)" -->
SPHINXBASE_EXPORT void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="agc_8h.html#6a050fc4b079be05b1946636d5d7f3aa">agc_free</a> (<a class="el" href="structagc__s.html">agc_t</a> *agc)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Free AGC structure. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">SPHINXBASE_EXPORT void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="agc_8h.html#29a2a4dd80141af1c3476094c353b739">agc_max</a> (<a class="el" href="structagc__s.html">agc_t</a> *agc, mfcc_t **mfc, int32 n_frame)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Apply AGC to the given mfc vectors (normalize all C0 mfc coefficients in the given input such that the max C0 value is 0, by subtracting the input max C0 from all).  <a href="#29a2a4dd80141af1c3476094c353b739"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">SPHINXBASE_EXPORT void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="agc_8h.html#c2cdd4c519b46824c5b28c5b769b5ecd">agc_emax</a> (<a class="el" href="structagc__s.html">agc_t</a> *agc, mfcc_t **mfc, int32 n_frame)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Apply AGC to the given block of MFC vectors.  <a href="#c2cdd4c519b46824c5b28c5b769b5ecd"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">SPHINXBASE_EXPORT void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="agc_8h.html#f47b6004f2f963ae0019a67450b892c2">agc_emax_update</a> (<a class="el" href="structagc__s.html">agc_t</a> *agc)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Update AGC parameters for next utterance.  <a href="#f47b6004f2f963ae0019a67450b892c2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="7b439fb5d36250d09bb9d459c1e28ba5"></a><!-- doxytag: member="agc.h::agc_emax_get" ref="7b439fb5d36250d09bb9d459c1e28ba5" args="(agc_t *agc)" -->
SPHINXBASE_EXPORT float32&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="agc_8h.html#7b439fb5d36250d09bb9d459c1e28ba5">agc_emax_get</a> (<a class="el" href="structagc__s.html">agc_t</a> *agc)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the current AGC maximum estimate. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="4fd17f224b5d8f7bfcaa9389d11716eb"></a><!-- doxytag: member="agc.h::agc_emax_set" ref="4fd17f224b5d8f7bfcaa9389d11716eb" args="(agc_t *agc, float32 m)" -->
SPHINXBASE_EXPORT void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="agc_8h.html#4fd17f224b5d8f7bfcaa9389d11716eb">agc_emax_set</a> (<a class="el" href="structagc__s.html">agc_t</a> *agc, float32 m)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the current AGC maximum estimate. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">SPHINXBASE_EXPORT void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="agc_8h.html#e65d4be1d74aea11b7e16e3777272d13">agc_noise</a> (<a class="el" href="structagc__s.html">agc_t</a> *agc, mfcc_t **mfc, int32 n_frame)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Apply AGC using noise threshold to the given block of MFC vectors.  <a href="#e65d4be1d74aea11b7e16e3777272d13"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="77d0987174a1b3c6e8fcd63fe82f33ce"></a><!-- doxytag: member="agc.h::agc_get_threshold" ref="77d0987174a1b3c6e8fcd63fe82f33ce" args="(agc_t *agc)" -->
SPHINXBASE_EXPORT float32&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="agc_8h.html#77d0987174a1b3c6e8fcd63fe82f33ce">agc_get_threshold</a> (<a class="el" href="structagc__s.html">agc_t</a> *agc)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the current AGC noise threshold. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="aaa9e15f192c91ad64c343b7c6db6714"></a><!-- doxytag: member="agc.h::agc_set_threshold" ref="aaa9e15f192c91ad64c343b7c6db6714" args="(agc_t *agc, float32 threshold)" -->
SPHINXBASE_EXPORT void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="agc_8h.html#aaa9e15f192c91ad64c343b7c6db6714">agc_set_threshold</a> (<a class="el" href="structagc__s.html">agc_t</a> *agc, float32 threshold)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the current AGC noise threshold. <br></td></tr>
<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">SPHINXBASE_EXPORT const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="agc_8h.html#6ea1b2b3d482cf08eb36084629503c80">agc_type_str</a> []</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">String representations of agc_type_t values.  <a href="#6ea1b2b3d482cf08eb36084629503c80"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
routine that implements automatic gain control 
<p>
<dl class="warning" compact><dt><b>Warning:</b></dt><dd>This function may not be fully compatible with SphinxTrain's family of AGC.</dd></dl>
This implements AGC. 
<p>Definition in file <a class="el" href="agc_8h-source.html">agc.h</a>.</p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="c2cdd4c519b46824c5b28c5b769b5ecd"></a><!-- doxytag: member="agc.h::agc_emax" ref="c2cdd4c519b46824c5b28c5b769b5ecd" args="(agc_t *agc, mfcc_t **mfc, int32 n_frame)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SPHINXBASE_EXPORT void agc_emax           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structagc__s.html">agc_t</a> *&nbsp;</td>
          <td class="paramname"> <em>agc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">mfcc_t **&nbsp;</td>
          <td class="paramname"> <em>mfc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32&nbsp;</td>
          <td class="paramname"> <em>n_frame</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Apply AGC to the given block of MFC vectors. 
<p>
Unlike <a class="el" href="agc_8h.html#29a2a4dd80141af1c3476094c353b739" title="Apply AGC to the given mfc vectors (normalize all C0 mfc coefficients in the given...">agc_max()</a> this does not require the entire utterance to be available. Call <a class="el" href="agc_8h.html#f47b6004f2f963ae0019a67450b892c2" title="Update AGC parameters for next utterance.">agc_emax_update()</a> at the end of each utterance to update the AGC parameters. <dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>agc</em>&nbsp;</td><td>
In: AGC structure </td></tr>
<tr><td valign="top"><em>mfc</em>&nbsp;</td><td>
In/Out: mfc[f] = cepstrum vector in frame f </td></tr>
<tr><td valign="top"><em>n_frame</em>&nbsp;</td><td>
In: number of frames of cepstrum vectors supplied </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="agc_8c-source.html#l00142">142</a> of file <a class="el" href="agc_8c-source.html">agc.c</a>.</p>

<p>References <a class="el" href="agc_8c-source.html#l00142">agc_emax()</a>, <a class="el" href="agc_8h-source.html#l00114">agc_s::max</a>, <a class="el" href="agc_8h-source.html#l00116">agc_s::obs_frame</a>, and <a class="el" href="agc_8h-source.html#l00115">agc_s::obs_max</a>.</p>

<p>Referenced by <a class="el" href="agc_8c-source.html#l00142">agc_emax()</a>.</p>

</div>
</div><p>
<a class="anchor" name="f47b6004f2f963ae0019a67450b892c2"></a><!-- doxytag: member="agc.h::agc_emax_update" ref="f47b6004f2f963ae0019a67450b892c2" args="(agc_t *agc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SPHINXBASE_EXPORT void agc_emax_update           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structagc__s.html">agc_t</a> *&nbsp;</td>
          <td class="paramname"> <em>agc</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Update AGC parameters for next utterance. 
<p>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>agc</em>&nbsp;</td><td>
In: AGC structure </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="agc_8c-source.html#l00159">159</a> of file <a class="el" href="agc_8c-source.html">agc.c</a>.</p>

<p>References <a class="el" href="agc_8c-source.html#l00159">agc_emax_update()</a>, <a class="el" href="err_8h-source.html#l00159">E_INFO</a>, <a class="el" href="agc_8h-source.html#l00114">agc_s::max</a>, <a class="el" href="agc_8h-source.html#l00116">agc_s::obs_frame</a>, <a class="el" href="agc_8h-source.html#l00115">agc_s::obs_max</a>, <a class="el" href="agc_8h-source.html#l00118">agc_s::obs_max_sum</a>, and <a class="el" href="agc_8h-source.html#l00117">agc_s::obs_utt</a>.</p>

<p>Referenced by <a class="el" href="agc_8c-source.html#l00159">agc_emax_update()</a>.</p>

</div>
</div><p>
<a class="anchor" name="29a2a4dd80141af1c3476094c353b739"></a><!-- doxytag: member="agc.h::agc_max" ref="29a2a4dd80141af1c3476094c353b739" args="(agc_t *agc, mfcc_t **mfc, int32 n_frame)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SPHINXBASE_EXPORT void agc_max           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structagc__s.html">agc_t</a> *&nbsp;</td>
          <td class="paramname"> <em>agc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">mfcc_t **&nbsp;</td>
          <td class="paramname"> <em>mfc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32&nbsp;</td>
          <td class="paramname"> <em>n_frame</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Apply AGC to the given mfc vectors (normalize all C0 mfc coefficients in the given input such that the max C0 value is 0, by subtracting the input max C0 from all). 
<p>
This function operates on an entire utterance at a time. Hence, the entire utterance must be available beforehand (batchmode). <dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>agc</em>&nbsp;</td><td>
In: AGC structure (not used) </td></tr>
<tr><td valign="top"><em>mfc</em>&nbsp;</td><td>
In/Out: mfc[f] = cepstrum vector in frame f </td></tr>
<tr><td valign="top"><em>n_frame</em>&nbsp;</td><td>
In: number of frames of cepstrum vectors supplied </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="agc_8c-source.html#l00109">109</a> of file <a class="el" href="agc_8c-source.html">agc.c</a>.</p>

<p>References <a class="el" href="agc_8c-source.html#l00109">agc_max()</a>, <a class="el" href="err_8h-source.html#l00159">E_INFO</a>, <a class="el" href="agc_8h-source.html#l00116">agc_s::obs_frame</a>, and <a class="el" href="agc_8h-source.html#l00115">agc_s::obs_max</a>.</p>

<p>Referenced by <a class="el" href="agc_8c-source.html#l00109">agc_max()</a>.</p>

</div>
</div><p>
<a class="anchor" name="e65d4be1d74aea11b7e16e3777272d13"></a><!-- doxytag: member="agc.h::agc_noise" ref="e65d4be1d74aea11b7e16e3777272d13" args="(agc_t *agc, mfcc_t **mfc, int32 n_frame)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SPHINXBASE_EXPORT void agc_noise           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structagc__s.html">agc_t</a> *&nbsp;</td>
          <td class="paramname"> <em>agc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">mfcc_t **&nbsp;</td>
          <td class="paramname"> <em>mfc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32&nbsp;</td>
          <td class="paramname"> <em>n_frame</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Apply AGC using noise threshold to the given block of MFC vectors. 
<p>
<dl compact><dt><b>Parameters: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>agc</em>&nbsp;</td><td>
In: AGC structure </td></tr>
<tr><td valign="top"><em>mfc</em>&nbsp;</td><td>
In/Out: mfc[f] = cepstrum vector in frame f </td></tr>
<tr><td valign="top"><em>n_frame</em>&nbsp;</td><td>
In: number of frames of cepstrum vectors supplied </td></tr>
</table>
</dl>
<p>Definition at line <a class="el" href="agc_8c-source.html#l00180">180</a> of file <a class="el" href="agc_8c-source.html">agc.c</a>.</p>

<p>References <a class="el" href="agc_8c-source.html#l00180">agc_noise()</a>, <a class="el" href="err_8h-source.html#l00159">E_INFO</a>, and <a class="el" href="agc_8h-source.html#l00119">agc_s::noise_thresh</a>.</p>

<p>Referenced by <a class="el" href="agc_8c-source.html#l00180">agc_noise()</a>.</p>

</div>
</div><p>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="6ea1b2b3d482cf08eb36084629503c80"></a><!-- doxytag: member="agc.h::agc_type_str" ref="6ea1b2b3d482cf08eb36084629503c80" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SPHINXBASE_EXPORT const char* <a class="el" href="agc_8h.html#6ea1b2b3d482cf08eb36084629503c80">agc_type_str</a>[]          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
String representations of agc_type_t values. 
<p>

<p>Definition at line <a class="el" href="agc_8c-source.html#l00070">70</a> of file <a class="el" href="agc_8c-source.html">agc.c</a>.</p>

<p>Referenced by <a class="el" href="agc_8c-source.html#l00079">agc_type_from_str()</a>, and <a class="el" href="feat_8c-source.html#l00840">feat_init()</a>.</p>

</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Sat Dec 3 20:28:37 2011 for SphinxBase by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.7.1 </small></address>
</body>
</html>
